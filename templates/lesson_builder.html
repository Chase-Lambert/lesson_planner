{% extends "base.html" %}

{% block navbar %}
<div class="navbar bg-base-100 container">
  <div class="flex-1">
    <a href="/classes" class="btn btn-ghost normal-case text-2xl">LessonPlanner.ai</a>
  </div>
  <div class="flex-none">
    <ul class="menu menu-horizontal px-1">
      <li><a href="/lesson" class="underline decoration-2 underline-offset-8">Lesson Builder</a></li>
      <li><a href="/classes">Classes</a></li>
      <li><a href="/account">Account</a></li>
    </ul>
  </div>
</div>
{% endblock %}

{% block main %}

<div class="container mx-auto max-w-lg">
  <h2 class="text-2xl font-extrabold text-center">Lesson Builder</h2>

  <div class="bg-gray-100 p-4 rounded-lg shadow-md mb-8">
    <h3 class="text-lg font-semibold mb-2">Original lesson plan description:</h3>
    <ul>
      {% for message in history if message.role == "user" %}
      <li><strong>{{ message.role }}:</strong> {{ message.content }}</li>
      {% endfor %}
    </ul>
  </div>

  <div class="bg-gray-100 p-4 rounded-lg shadow-md mb-8 max-w-3xl mx-auto">
    <h3 class="text-lg font-semibold mb-2">Lesson Plan:</h3>
    <ul class="prose">
      {% for message in history if message.role == "assistant" %}
      <li><strong>{{ message.role }}:</strong> {{ message.content|safe }}</li>
      {% endfor %}
    </ul>
  </div>

  <form action="/lesson_builder" method="post" class="max-w-md mx-auto">
    <div class="mb-4">
      <label for="message" class="block mb-2 text-sm">What else would you like to add to the lesson plan:</label>
      <input type="hidden" name="conversation_history" value="{{ conversation_history_json }}" />
      <input type="text" name="message" id="message" class="form-input w-full" />
    </div>
    <button type="submit" class="btn btn-primary w-full">Submit</button>
  </form>
</div>


{% endblock %}
